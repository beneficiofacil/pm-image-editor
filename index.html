<!DOCTYPE html>
<html>
<head>
  <title>pmImageEditor Test Page</title>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.29/angular.min.js"></script>
  <style>
    .row {
      margin-bottom: 20px;
    }
    .editorArea {
      margin: auto;
      overflow: hidden;
    }
    .editorArea.big {
      width:800px;
    }
    .editorArea.medium {
      width:500px;
    }
    .editorArea.small {
      width:300px;
    }
  </style>
</head>
<body ng-controller="Ctrl">
  <div class="row">
    Container size:
    <label><input type="radio" ng-model="size" value="big" /> Big</label>
    <label><input type="radio" ng-model="size" value="medium" /> Medium</label>
    <label><input type="radio" ng-model="size" value="small" /> Small</label>
  </div>

  <div class="row">
    Image:
    <label><input type="radio" ng-model="image" value="test.jpg" /> Monkey</label>
    <label><input type="radio" ng-model="image" value="test1.jpg" /> PC</label>
    <label><input type="radio" ng-model="image" value="test_100x400.png" /> 100x400 </label>
  </div>


  <div class="editorArea" ng-class="{'big':size=='big', 'medium':size=='medium', 'small':size=='small'}">
    <image-editor image="{{ image }}"
                  width="{{ width }}"
                  selection-width="100"
                  selection-height="70"
    ></image-editor>
  </div>

  <script type="text/javascript">
    function initApp() {
      angular.module('app', ['pmImageEditor'])
        .controller('Ctrl', function($scope) {
          var widths = {
            'small': 300,
            'medium': 500,
            'big': 800
          };

          $scope.size = 'small';
          $scope.width = widths[$scope.size];
          $scope.image = 'test.jpg';

          $scope.$watch('size', function(value) {
            if (value) {
              $scope.width = widths[value]
            }
          });
        });

      angular.bootstrap(document, ['app']);
    }

    function getParameterByName(name) {
      name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
      var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
          results = regex.exec(location.search);

      return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
    };

    var branch = getParameterByName('branch') || 'master';
    branch += '/'; 

    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.async = true;
    script.src = 'https://rawgit.com/partnermarketing/pm-image-editor/'+branch+'compile/unminified/pm-image-editor.js';
    script.onload = initApp;

    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(script, s);

    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = 'https://rawgit.com/partnermarketing/pm-image-editor/'+branch+'compile/unminified/pm-image-editor.css';

    s.parentNode.insertBefore(link, s);
  </script>  
</body>
</html>